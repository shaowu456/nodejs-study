(function(e){function t(t){for(var a,i,l=t[0],o=t[1],c=t[2],m=0,p=[];m<l.length;m++)i=l[m],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&p.push(r[i][0]),r[i]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a]);u&&u(t);while(p.length)p.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,l=1;l<n.length;l++){var o=n[l];0!==r[o]&&(a=!1)}a&&(s.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},r={app:0},s=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/admin/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],o=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var u=o;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"017e":function(e,t,n){"use strict";var a=n("b9b5"),r=n.n(a);r.a},"034f":function(e,t,n){"use strict";var a=n("85ec"),r=n.n(a);r.a},"0f9a":function(e,t,n){"use strict";n.r(t);n("d3b7");var a=n("ba6a"),r=function(e){return a["a"].post("login",e)},s={name:"",avatar:"",introduction:"",roles:["admin"],logininfo:"",userinfo:{},locationId:"",routerName:[],captchaCreate:""},i={firstLetter:function(e){return e.userName.substr(0,1)}},l={SET_LOGININFO:function(e,t){e.logininfo=t}},o={login:function(e,t){var n=e.commit;return new Promise((function(e,a){r(t).then((function(t){var a=t.data;n("SET_LOGININFO",a),console.log(s),e(t)})).catch((function(e){a(e)}))}))}};t["default"]={namespaced:!1,getters:i,state:s,mutations:l,actions:o,modules:{}}},"22de":function(e,t,n){"use strict";var a=n("8319"),r=n.n(a);r.a},"2b84":function(e,t,n){},4360:function(e,t,n){"use strict";n("13d5"),n("d3b7"),n("ac1f"),n("5319"),n("ddb0");var a=n("2b0e"),r=n("2f62"),s={roles:function(e){return e.user.roles},logininfo:function(e){return e.user.logininfo},partitionBywarehouse:function(e){return e.basedata.partitionBywarehouse}},i=s,l=function(e){localStorage.state&&e.replaceState(JSON.parse(localStorage.state)),e.subscribe((function(e,t){localStorage.state=JSON.stringify(t)}))};a["default"].use(r["a"]);var o=n("c653"),c=o.keys().reduce((function(e,t){var n=t.replace(/^\.\/(.*)\.\w+$/,"$1"),a=o(t);return e[n]=a.default,e}),{}),u=new r["a"].Store({modules:c,getters:i,plugins:[l]});t["a"]=u},4712:function(e,t,n){"use strict";var a=n("e2fc"),r=n.n(a);r.a},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},s=[],i=(n("034f"),n("2877")),l={},o=Object(i["a"])(l,r,s,!1,null,null,null),c=o.exports,u=n("5c96"),m=n.n(u);n("0fae");a["default"].use(m.a);var p=n("a18c"),d=n("4360"),f=n("ba6a");a["default"].prototype.$http=f["a"],a["default"].config.productionTip=!1,a["default"].mixin({computed:{uploadUrl:function(){return this.$http.defaults.baseURL+"/upload"}},methods:{getAuthHeader:function(){return{Authorization:"Bearer ".concat(localStorage.token||"")}}}}),new a["default"]({router:p["a"],store:d["a"],render:function(e){return e(c)}}).$mount("#app")},8319:function(e,t,n){},"85ec":function(e,t,n){},"9de8":function(e,t,n){"use strict";var a=n("d8ad"),r=n.n(a);r.a},a18c:function(e,t,n){"use strict";n("c975");var a=n("2b0e"),r=n("8c4f"),s=n("4360"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticStyle:{height:"100vh"}},[n("el-aside",{staticStyle:{"background-color":"rgb(238, 241, 246)"},attrs:{width:"200px"}},[n("el-menu",{attrs:{router:"","default-openeds":["1","3"],"default-active":e.$route.path}},[n("el-submenu",{attrs:{index:"1"}},[n("template",{slot:"title"},[n("i",{staticClass:"el-icon-message"}),e._v("内容管理")]),n("el-menu-item-group",[n("template",{slot:"title"},[e._v("客户")]),n("el-menu-item",{attrs:{index:"/customers/create"}},[e._v("新建客户")]),n("el-menu-item",{attrs:{index:"/customers/list"}},[e._v("客户列表")])],2),e.adminShow?n("el-menu-item-group",[n("template",{slot:"title"},[e._v("账号")]),n("el-menu-item",{attrs:{index:"/admin_users/create"}},[e._v("新建管理员")]),n("el-menu-item",{attrs:{index:"/admin_users/list"}},[e._v("管理员列表")])],2):e._e()],2)],1)],1),n("el-container",[n("el-header",{staticStyle:{"text-align":"right","font-size":"12px",height:"40px"}},[n("span",[e._v(e._s(e.username))]),n("el-dropdown",{attrs:{trigger:"click"}},[n("i",{staticClass:"el-icon-arrow-down el-icon--right",staticStyle:{"margin-right":"15px"}}),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{nativeOn:{click:function(t){return t.preventDefault(),e.leave(t)}}},[e._v("退出")])],1)],1)],1),n("el-main",{staticClass:"container_box",attrs:{id:"container_box"}},[n("router-view",{key:e.$route.path})],1)],1)],1)},l=[],o=(n("a4d3"),n("4de4"),n("4160"),n("e439"),n("dbb4"),n("b64b"),n("159b"),n("2fa7")),c=n("2f62");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(n,!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={data:function(){return{username:"",adminShow:!1}},computed:m({},Object(c["b"])(["logininfo"])),mounted:function(){this.username=this.logininfo._doc.address,"superadmin"===this.logininfo._doc.username?this.adminShow=!0:this.adminShow=!1},methods:{leave:function(){localStorage.clear(),this.$router.push("/login")}}},d=p,f=(n("22de"),n("b4fe"),n("2877")),h=Object(f["a"])(d,i,l,!1,null,null,null),b=h.exports,v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login-container"},[n("el-card",{staticClass:"login-card",attrs:{header:"请先登录"}},[n("el-form",{nativeOn:{submit:function(t){return t.preventDefault(),e.login(t)}}},[n("el-form-item",{attrs:{label:"用户名"}},[n("el-input",{model:{value:e.model.username,callback:function(t){e.$set(e.model,"username",t)},expression:"model.username"}})],1),n("el-form-item",{attrs:{label:"密码"}},[n("el-input",{attrs:{type:"password"},model:{value:e.model.password,callback:function(t){e.$set(e.model,"password",t)},expression:"model.password"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary","native-type":"submit"}},[e._v("登录")])],1)],1)],1)],1)},g=[],y=(n("96cf"),n("89ba")),x={data:function(){return{model:{}}},methods:{login:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("login",this.model);case 2:t=e.sent,localStorage.token=t.data.token,this.$router.push("/customers/list"),this.$message({type:"success",message:"登录成功"});case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},_=x,k=(n("d6db"),Object(f["a"])(_,v,g,!1,null,null,null)),w=k.exports,$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"about"},[n("h1",[e._v(e._s(e.id?"编辑":"新建")+"分类")]),n("el-form",{attrs:{"label-width":"120px"},nativeOn:{submit:function(t){return t.preventDefault(),e.save(t)}}},[n("el-form-item",{attrs:{label:"上级分类"}},[n("el-select",{model:{value:e.model.parent,callback:function(t){e.$set(e.model,"parent",t)},expression:"model.parent"}},e._l(e.parents,(function(e){return n("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})})),1)],1),n("el-form-item",{attrs:{label:"名称"}},[n("el-input",{model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary","native-type":"submit"}},[e._v("保存")])],1)],1)],1)},O=[],j={props:{id:{}},data:function(){return{model:{},parents:[{name:"光",_id:"g1"},{name:"暗",_id:"a1"}]}},methods:{save:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.id){e.next=6;break}return e.next=3,this.$http.put("rest/categories/".concat(this.id),this.model);case 3:e.sent,e.next=9;break;case 6:return e.next=8,this.$http.post("rest/categories",this.model);case 8:e.sent;case 9:this.$router.push("/categories/list"),this.$message({type:"success",message:"保存成功"});case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetch:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("rest/categories/".concat(this.id));case 2:t=e.sent,this.model=t.data;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchParents:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("rest/categories");case 2:t=e.sent,this.parents=t.data;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},created:function(){this.fetchParents(),this.id&&this.fetch()}},R=j,L=Object(f["a"])(R,$,O,!1,null,null,null),S=L.exports,P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v("分类列表")]),n("el-form",{attrs:{"label-position":"right",inline:""}},[n("el-row",[n("el-form-item",{attrs:{label:"上级分类"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.parent,callback:function(t){e.parent=t},expression:"parent"}},e._l(e.parentList,(function(e,t){return n("el-option",{key:t,attrs:{label:e.name,value:e._id}})})),1)],1),n("el-button",{staticClass:"goodsbtnbox",attrs:{size:"medium",type:"primary"},on:{click:e.query}},[e._v("查询")]),n("el-button",{staticClass:"goodsbtnbox",attrs:{size:"medium"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),n("el-table",{attrs:{data:e.items}},[n("el-table-column",{attrs:{prop:"_id",label:"ID",width:"240"}}),n("el-table-column",{attrs:{prop:"parent.name",label:"上级分类"}}),n("el-table-column",{attrs:{prop:"name",label:"分类名称"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.$router.push("/categories/edit/"+t.row._id)}}},[e._v("编辑")]),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.remove(t.row)}}},[e._v("删除")])]}}])})],1)],1)},D=[],z=(n("b0c0"),{data:function(){return{items:[],parent:"",parentList:[]}},methods:{query:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("/findListByParent/".concat(this.parent),{name:"天"});case 2:t=e.sent,this.items=t.data;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchParentLists:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("/findListByParent/5dce1aa5a8a3823e706a98eb");case 2:t=e.sent,this.parentList=t.data;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),resetQuery:function(){},fetch:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("rest/categories");case 2:t=e.sent,this.items=t.data;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),remove:function(e){var t=this;this.$confirm('是否确定要删除分类 "'.concat(e.name,'"'),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(y["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$http.delete("rest/categories/".concat(e._id));case 2:n.sent,t.$message({type:"success",message:"删除成功!"}),t.fetch();case 5:case"end":return n.stop()}}),n)}))))}},created:function(){this.fetch(),this.fetchParentLists()}}),C=z,E=Object(f["a"])(C,P,D,!1,null,null,null),U=E.exports,q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"about"},[n("h1",[e._v(e._s(e.id?"编辑":"新建")+"物品")]),n("el-form",{attrs:{"label-width":"120px"},nativeOn:{submit:function(t){return t.preventDefault(),e.save(t)}}},[n("el-form-item",{attrs:{label:"名称"}},[n("el-input",{model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1),n("el-form-item",{attrs:{label:"图标"}},[n("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.$http.defaults.baseURL+"/upload",headers:e.getAuthHeader(),"show-file-list":!1,"on-success":e.afterUpload,"before-upload":e.beforeAvatarUpload}},[e.model.icon?n("img",{staticClass:"avatar",attrs:{src:e.model.icon}}):n("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),n("el-form-item",[n("el-button",{attrs:{type:"primary","native-type":"submit"}},[e._v("保存")])],1)],1)],1)},F=[],I={props:{id:{}},data:function(){return{model:{}}},methods:{save:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.id){e.next=6;break}return e.next=3,this.$http.put("rest/items/".concat(this.id),this.model);case 3:e.sent,e.next=9;break;case 6:return e.next=8,this.$http.post("rest/items",this.model);case 8:e.sent;case 9:this.$router.push("/items/list"),this.$message({type:"success",message:"保存成功"});case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetch:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("rest/items/".concat(this.id));case 2:t=e.sent,this.model=t.data;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),afterUpload:function(e){this.$set(this.model,"icon",e.url)},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,n=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),n||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&n}},created:function(){this.id&&this.fetch()}},N=I,T=(n("b72d"),Object(f["a"])(N,q,F,!1,null,null,null)),B=T.exports,A=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v("分类列表")]),n("el-table",{attrs:{data:e.items}},[n("el-table-column",{attrs:{prop:"_id",label:"ID",width:"240"}}),n("el-table-column",{attrs:{prop:"name",label:"分类名称"}}),n("el-table-column",{attrs:{prop:"name",label:"图标"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("img",{staticStyle:{height:"4rem"},attrs:{src:e.row.icon,alt:""}})]}}])}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.$router.push("/items/edit/"+t.row._id)}}},[e._v("编辑")]),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.remove(t.row)}}},[e._v("删除")])]}}])})],1)],1)},G=[],M={data:function(){return{items:[]}},methods:{fetch:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("rest/items");case 2:t=e.sent,this.items=t.data;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),remove:function(e){var t=this;this.$confirm('是否确定要删除分类 "'.concat(e.name,'"'),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(y["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$http.delete("rest/items/".concat(e._id));case 2:n.sent,t.$message({type:"success",message:"删除成功!"}),t.fetch();case 5:case"end":return n.stop()}}),n)}))))}},created:function(){this.fetch()}},V=M,Y=Object(f["a"])(V,A,G,!1,null,null,null),Z=Y.exports,J=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"about"},[n("h1",[e._v(e._s(e.id?"编辑":"新建")+"英雄")]),n("el-form",{attrs:{"label-width":"120px"},nativeOn:{submit:function(t){return t.preventDefault(),e.save(t)}}},[n("el-tabs",{attrs:{value:"bases",type:"border-card"}},[n("el-tab-pane",{attrs:{name:"bases",label:"基础信息"}},[n("el-form-item",{attrs:{label:"名称"}},[n("el-input",{model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1),n("el-form-item",{attrs:{label:"称号"}},[n("el-input",{model:{value:e.model.title,callback:function(t){e.$set(e.model,"title",t)},expression:"model.title"}})],1),n("el-form-item",{attrs:{label:"头像"}},[n("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.$http.defaults.baseURL+"/upload",headers:e.getAuthHeader(),"show-file-list":!1,"on-success":e.afterUpload,"before-upload":e.beforeAvatarUpload}},[e.model.avatar?n("img",{staticClass:"avatar",attrs:{src:e.model.avatar}}):n("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),n("el-form-item",{attrs:{label:"类型"}},[n("el-select",{attrs:{multiple:""},model:{value:e.model.categories,callback:function(t){e.$set(e.model,"categories",t)},expression:"model.categories"}},e._l(e.categories,(function(e){return n("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})})),1)],1),n("el-form-item",{attrs:{label:"难度"}},[n("el-rate",{staticStyle:{"margin-top":"0.6rem"},attrs:{max:9,"show-score":""},model:{value:e.model.scores.difficult,callback:function(t){e.$set(e.model.scores,"difficult",t)},expression:"model.scores.difficult"}})],1),n("el-form-item",{attrs:{label:"顺风出装"}},[n("el-select",{attrs:{multiple:""},model:{value:e.model.items1,callback:function(t){e.$set(e.model,"items1",t)},expression:"model.items1"}},e._l(e.items,(function(e){return n("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})})),1)],1),n("el-form-item",{attrs:{label:"逆风出装"}},[n("el-select",{attrs:{multiple:""},model:{value:e.model.items2,callback:function(t){e.$set(e.model,"items2",t)},expression:"model.items2"}},e._l(e.items,(function(e){return n("el-option",{key:e._id,attrs:{label:e.name,value:e._id}})})),1)],1)],1),n("el-tab-pane",{attrs:{name:"skills",label:"技能"}},[n("el-button",{attrs:{size:"small"},on:{click:function(t){return e.model.skills.push({})}}},[n("i",{staticClass:"el-icon-plus"}),e._v(" 添加技能 ")]),n("el-row",{staticStyle:{"flex-wrap":"wrap"},attrs:{type:"flex"}},e._l(e.model.skills,(function(t,a){return n("el-col",{key:a,attrs:{md:12}},[n("el-form-item",{attrs:{label:"名称"}},[n("el-input",{model:{value:t.name,callback:function(n){e.$set(t,"name",n)},expression:"item.name"}})],1),n("el-form-item",{attrs:{label:"图标"}},[n("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadUrl,headers:e.getAuthHeader(),"show-file-list":!1,"on-success":function(n){return e.$set(t,"icon",n.url)}}},[t.icon?n("img",{staticClass:"avatar",attrs:{src:t.icon}}):n("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),n("el-form-item",{attrs:{label:"冷却值"}},[n("el-input",{model:{value:t.delay,callback:function(n){e.$set(t,"delay",n)},expression:"item.delay"}})],1),n("el-form-item",{attrs:{label:"消耗"}},[n("el-input",{model:{value:t.cost,callback:function(n){e.$set(t,"cost",n)},expression:"item.cost"}})],1),n("el-form-item",{attrs:{label:"描述"}},[n("el-input",{attrs:{type:"textarea"},model:{value:t.description,callback:function(n){e.$set(t,"description",n)},expression:"item.description"}})],1),n("el-form-item",{attrs:{label:"小提示"}},[n("el-input",{attrs:{type:"textarea"},model:{value:t.tips,callback:function(n){e.$set(t,"tips",n)},expression:"item.tips"}})],1),n("el-form-item",[n("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(t){return e.model.skills.splice(a,1)}}},[e._v("删除")])],1)],1)})),1)],1)],1),n("el-form-item",[n("el-button",{staticStyle:{"margin-top":"2rem"},attrs:{type:"primary","native-type":"submit"}},[e._v("保存")])],1)],1)],1)},H=[],Q={props:{id:{}},data:function(){return{categories:[],items:[],model:{items1:"",items2:"",name:"",avatar:"",skills:[],partners:[],scores:{difficult:0}}}},methods:{save:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.id){e.next=6;break}return e.next=3,this.$http.put("rest/heroes/".concat(this.id),this.model);case 3:e.sent,e.next=9;break;case 6:return e.next=8,this.$http.post("rest/heroes",this.model);case 8:e.sent;case 9:this.$router.push("/heroes/list"),this.$message({type:"success",message:"保存成功"});case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetch:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("rest/heroes/".concat(this.id));case 2:t=e.sent,this.model=Object.assign({},this.model,t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchCategories:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("rest/categories");case 2:t=e.sent,this.categories=t.data;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),afterUpload:function(e){this.$set(this.model,"avatar",e.url)},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,n=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),n||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&n},fetchItems:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("rest/items");case 2:t=e.sent,this.items=t.data;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},created:function(){this.fetchItems(),this.id&&this.fetch(),this.fetchCategories()}},K=Q,W=(n("9de8"),Object(f["a"])(K,J,H,!1,null,null,null)),X=W.exports,ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v("分类列表")]),n("el-table",{attrs:{data:e.items}},[n("el-table-column",{attrs:{prop:"_id",label:"ID",width:"240"}}),n("el-table-column",{attrs:{prop:"name",label:"英雄名称"}}),n("el-table-column",{attrs:{prop:"name",label:"头像"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("img",{staticStyle:{height:"4rem"},attrs:{src:e.row.avatar,alt:""}})]}}])}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.$router.push("/heroes/edit/"+t.row._id)}}},[e._v("编辑")]),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.remove(t.row)}}},[e._v("删除")])]}}])})],1)],1)},te=[],ne={data:function(){return{items:[]}},methods:{fetch:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("rest/heroes");case 2:t=e.sent,this.items=t.data;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),remove:function(e){var t=this;this.$confirm('是否确定要删除英雄"'.concat(e.name,'"'),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(y["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$http.delete("rest/heroes/".concat(e._id));case 2:n.sent,t.$message({type:"success",message:"删除成功!"}),t.fetch();case 5:case"end":return n.stop()}}),n)}))))}},created:function(){this.fetch()}},ae=ne,re=Object(f["a"])(ae,ee,te,!1,null,null,null),se=re.exports,ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"about"},[n("h1",{staticStyle:{margin:"0"}},[e._v(e._s(e.id?"编辑":"新建")+"客户")]),n("el-form",{attrs:{"label-width":"120px"},nativeOn:{submit:function(t){return t.preventDefault(),e.save(t)}}},[n("el-tabs",{attrs:{value:"bases",type:"border-card"}},[n("el-tab-pane",{attrs:{name:"bases",label:"基础信息"}},[n("el-form-item",{attrs:{label:"姓名"}},[n("el-input",{model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1),n("el-form-item",{attrs:{label:"电话"}},[n("el-input",{model:{value:e.model.phone,callback:function(t){e.$set(e.model,"phone",t)},expression:"model.phone"}})],1),n("el-form-item",{attrs:{label:"性别"}},[n("el-select",{model:{value:e.model.sex,callback:function(t){e.$set(e.model,"sex",t)},expression:"model.sex"}},e._l(e.categories,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),n("el-form-item",{attrs:{label:"出生日期"}},[n("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",align:"right",type:"date",placeholder:"选择日期","picker-options":e.pickerOptions1},model:{value:e.model.birthday,callback:function(t){e.$set(e.model,"birthday",t)},expression:"model.birthday"}})],1),n("el-form-item",{attrs:{label:"年龄"}},[n("el-input",{attrs:{disabled:!0},model:{value:e.model.age,callback:function(t){e.$set(e.model,"age",t)},expression:"model.age"}})],1),n("el-form-item",{attrs:{label:"地址"}},[n("el-input",{model:{value:e.model.address,callback:function(t){e.$set(e.model,"address",t)},expression:"model.address"}})],1)],1),n("el-tab-pane",{attrs:{name:"skills",label:"详情"}},[n("el-button",{attrs:{size:"small"},on:{click:function(t){return e.model.skills.push({})}}},[n("i",{staticClass:"el-icon-plus"}),e._v(" 添加 ")]),n("el-row",{staticStyle:{"flex-wrap":"wrap"},attrs:{type:"flex"}},e._l(e.model.skills,(function(t,a){return n("el-col",{key:a,attrs:{md:12}},[n("el-form-item",{attrs:{label:"名称"}},[n("el-input",{model:{value:t.name,callback:function(n){e.$set(t,"name",n)},expression:"item.name"}})],1),n("el-form-item",{attrs:{label:"创建日期"}},[n("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",align:"right",type:"date",placeholder:"选择日期","picker-options":e.pickerOptions1},model:{value:t.createDate,callback:function(n){e.$set(t,"createDate",n)},expression:"item.createDate"}})],1),n("el-form-item",{attrs:{label:"图标"}},[n("Up-Loadimgs",{attrs:{PfileList:t.iconLists,fakePfileList:t.fakeIconLists},on:{"update:PfileList":function(n){return e.$set(t,"iconLists",n)},"update:pfile-list":function(n){return e.$set(t,"iconLists",n)},"update:fakePfileList":function(n){return e.$set(t,"fakeIconLists",n)},"update:fake-pfile-list":function(n){return e.$set(t,"fakeIconLists",n)}}})],1),n("div",{staticClass:"free_ipt_box"},[n("span",{staticClass:"free_title"},[e._v("电脑验光")]),n("ul",[n("li"),n("li",[e._v("球镜")]),n("li",[e._v("柱镜")]),n("li",[e._v("轴向")]),n("li",[e._v("瞳距")])]),n("ul",[n("li",[e._v("OD")]),n("li",[n("el-input",{model:{value:t.pcODqj,callback:function(n){e.$set(t,"pcODqj",n)},expression:"item.pcODqj"}})],1),n("li",[n("el-input",{model:{value:t.pcODzj,callback:function(n){e.$set(t,"pcODzj",n)},expression:"item.pcODzj"}})],1),n("li",[n("el-input",{model:{value:t.pcODzx,callback:function(n){e.$set(t,"pcODzx",n)},expression:"item.pcODzx"}})],1),n("li",[n("el-input",{model:{value:t.pcODtj,callback:function(n){e.$set(t,"pcODtj",n)},expression:"item.pcODtj"}})],1)]),n("ul",[n("li",[e._v("OS")]),n("li",[n("el-input",{model:{value:t.pcOSqj,callback:function(n){e.$set(t,"pcOSqj",n)},expression:"item.pcOSqj"}})],1),n("li",[n("el-input",{model:{value:t.pcOSzj,callback:function(n){e.$set(t,"pcOSzj",n)},expression:"item.pcOSzj"}})],1),n("li",[n("el-input",{model:{value:t.pcOSzx,callback:function(n){e.$set(t,"pcOSzx",n)},expression:"item.pcOSzx"}})],1)])]),n("div",{staticClass:"free_ipt_box"},[n("span",{staticClass:"free_title"},[e._v("主观验光")]),n("ul",[n("li"),n("li",[e._v("球镜")]),n("li",[e._v("柱镜")]),n("li",[e._v("轴向")]),n("li",[e._v("瞳距")]),n("li",[e._v("ADD")])]),n("ul",[n("li",[e._v("OD")]),n("li",[n("el-input",{model:{value:t.obODqj,callback:function(n){e.$set(t,"obODqj",n)},expression:"item.obODqj"}})],1),n("li",[n("el-input",{model:{value:t.obODzj,callback:function(n){e.$set(t,"obODzj",n)},expression:"item.obODzj"}})],1),n("li",[n("el-input",{model:{value:t.obODzx,callback:function(n){e.$set(t,"obODzx",n)},expression:"item.obODzx"}})],1),n("li",[n("el-input",{model:{value:t.obODtj,callback:function(n){e.$set(t,"obODtj",n)},expression:"item.obODtj"}})],1),n("li",[n("el-input",{model:{value:t.obODadd,callback:function(n){e.$set(t,"obODadd",n)},expression:"item.obODadd"}})],1)]),n("ul",[n("li",[e._v("OS")]),n("li",[n("el-input",{model:{value:t.obOSqj,callback:function(n){e.$set(t,"obOSqj",n)},expression:"item.obOSqj"}})],1),n("li",[n("el-input",{model:{value:t.obOSzj,callback:function(n){e.$set(t,"obOSzj",n)},expression:"item.obOSzj"}})],1),n("li",[n("el-input",{model:{value:t.obOSzx,callback:function(n){e.$set(t,"obOSzx",n)},expression:"item.obOSzx"}})],1),n("li",[n("el-input",{model:{value:t.obOStj,callback:function(n){e.$set(t,"obOStj",n)},expression:"item.obOStj"}})],1)]),n("ul",[n("li",[e._v("主导眼")]),n("li",[n("el-input",{model:{value:t.obZDYqj,callback:function(n){e.$set(t,"obZDYqj",n)},expression:"item.obZDYqj"}})],1),n("li",[e._v("双眼平衡")]),n("li",[n("el-input",{model:{value:t.obZDYzx,callback:function(n){e.$set(t,"obZDYzx",n)},expression:"item.obZDYzx"}})],1),n("li",[e._v("瞳距")]),n("li",[n("el-input",{model:{value:t.obZDYadd,callback:function(n){e.$set(t,"obZDYadd",n)},expression:"item.obZDYadd"}})],1)])]),n("el-form-item",{attrs:{label:"描述"}},[n("el-input",{attrs:{type:"textarea"},model:{value:t.description,callback:function(n){e.$set(t,"description",n)},expression:"item.description"}})],1),n("el-form-item",[n("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(t){return e.model.skills.splice(a,1)}}},[e._v("删除")])],1)],1)})),1)],1),n("el-tab-pane",{attrs:{name:"history",label:"历史信息"}},[n("el-table",{attrs:{border:"",stripe:"",data:e.historyData}},[n("el-table-column",{attrs:{prop:"project_name",label:"项目名称"}}),n("el-table-column",{attrs:{prop:"r_eye",label:"右眼（R）"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.$index?n("el-input",{attrs:{placeholder:""},model:{value:e.model.histoyNakedR,callback:function(t){e.$set(e.model,"histoyNakedR",t)},expression:"model.histoyNakedR"}}):e._e(),1===t.$index?n("el-select",{model:{value:e.model.wearGtypeR,callback:function(t){e.$set(e.model,"wearGtypeR",t)},expression:"model.wearGtypeR"}},e._l(e.wearGtypes,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e(),2===t.$index?n("el-input",{attrs:{placeholder:""},model:{value:e.model.visionR,callback:function(t){e.$set(e.model,"visionR",t)},expression:"model.visionR"}}):e._e(),3===t.$index?n("el-input",{attrs:{placeholder:""},model:{value:e.model.correctVisionR,callback:function(t){e.$set(e.model,"correctVisionR",t)},expression:"model.correctVisionR"}}):e._e(),4===t.$index?n("el-input",{attrs:{placeholder:""},model:{value:e.model.eyePressR,callback:function(t){e.$set(e.model,"eyePressR",t)},expression:"model.eyePressR"}}):e._e(),5===t.$index?n("el-select",{model:{value:e.model.eyePositionR,callback:function(t){e.$set(e.model,"eyePositionR",t)},expression:"model.eyePositionR"}},e._l(e.eyePositions,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e(),6===t.$index?n("el-select",{model:{value:e.model.threedEyeR,callback:function(t){e.$set(e.model,"threedEyeR",t)},expression:"model.threedEyeR"}},e._l(e.threedEyes,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e(),7===t.$index?n("el-select",{model:{value:e.model.colorFeelR,callback:function(t){e.$set(e.model,"colorFeelR",t)},expression:"model.colorFeelR"}},e._l(e.colorFeels,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e(),8===t.$index?n("el-select",{model:{value:e.model.eyeCheckR,callback:function(t){e.$set(e.model,"eyeCheckR",t)},expression:"model.eyeCheckR"}},e._l(e.eyeChecks,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e()]}}])}),n("el-table-column",{attrs:{prop:"l_eye",label:"左眼（L）"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.$index?n("el-input",{attrs:{placeholder:""},model:{value:e.model.histoyNakedL,callback:function(t){e.$set(e.model,"histoyNakedL",t)},expression:"model.histoyNakedL"}}):e._e(),1===t.$index?n("el-select",{model:{value:e.model.wearGtypeL,callback:function(t){e.$set(e.model,"wearGtypeL",t)},expression:"model.wearGtypeL"}},e._l(e.wearGtypes,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e(),2===t.$index?n("el-input",{attrs:{placeholder:""},model:{value:e.model.visionL,callback:function(t){e.$set(e.model,"visionL",t)},expression:"model.visionL"}}):e._e(),3===t.$index?n("el-input",{attrs:{placeholder:""},model:{value:e.model.correctVisionL,callback:function(t){e.$set(e.model,"correctVisionL",t)},expression:"model.correctVisionL"}}):e._e(),4===t.$index?n("el-input",{attrs:{placeholder:""},model:{value:e.model.eyePressL,callback:function(t){e.$set(e.model,"eyePressL",t)},expression:"model.eyePressL"}}):e._e(),5===t.$index?n("el-select",{model:{value:e.model.eyePositionL,callback:function(t){e.$set(e.model,"eyePositionL",t)},expression:"model.eyePositionL"}},e._l(e.eyePositions,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e(),6===t.$index?n("el-select",{model:{value:e.model.threedEyeL,callback:function(t){e.$set(e.model,"threedEyeL",t)},expression:"model.threedEyeL"}},e._l(e.threedEyes,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e(),7===t.$index?n("el-select",{model:{value:e.model.colorFeelL,callback:function(t){e.$set(e.model,"colorFeelL",t)},expression:"model.colorFeelL"}},e._l(e.colorFeels,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e(),8===t.$index?n("el-select",{model:{value:e.model.eyeCheckL,callback:function(t){e.$set(e.model,"eyeCheckL",t)},expression:"model.eyeCheckL"}},e._l(e.eyeChecks,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e()]}}])})],1)],1)],1),n("el-form-item",[n("el-button",{staticStyle:{"margin-top":"2rem"},attrs:{type:"primary","native-type":"submit"}},[e._v("保存")])],1)],1)],1)},le=[],oe=(n("0d03"),n("ac1f"),n("1276"),function(e){var t,n=e.split("-"),a=n[0],r=n[1],s=n[2],i=new Date,l=i.getFullYear(),o=i.getMonth()+1,c=i.getDate();if(l==a)t=0;else{var u=l-a;if(u>0)if(o==r){var m=c-s;t=m<0?u-1:u}else{var p=o-r;t=p<0?u-1:u}else t=-1}return t}),ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"my_upload"},[n("el-upload",{attrs:{action:e.uploadUrl,headers:e.getAuthHeader(),"list-type":"picture-card","before-upload":e.beforeUploadPicture,"on-preview":e.handlePictureCardPreview,"on-progress":e.uploadProgress,"on-remove":e.handleRemove,"on-success":e.uploadSuccess,"on-error":e.uploadError,"file-list":e.fileList,"show-file-list":!0}},[n("i",{staticClass:"el-icon-plus"})]),n("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)},ue=[],me=(n("d81d"),n("a9e3"),{name:"upload",props:{value:{type:[String,Number],default:""},total:{type:[String,Number],default:60},PfileList:{type:Array,default:function(){return[]}},fakePfileList:{type:Array,default:function(){return[]}}},data:function(){return{fileList:this.PfileList,fakeFileList:[],dialogImageUrl:"",dialogVisible:!1,uploadComplete:!0}},watch:{PfileList:function(e){this.fileList=e},fileList:function(e){this.$emit("update:PfileList",e)},fakePfileList:function(e){this.fakeFileList=e},fakeFileList:function(e){this.$emit("update:fakePfileList",e)}},methods:{handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},beforeUploadPicture:function(e){if(e.size>2097152)return this.$message.error("上传图片不能大于2M"),!1},uploadProgress:function(e,t,n){this.uploadComplete=!1},uploadSuccess:function(e,t,n){var a=this;this.fakeFileList=[],n.map((function(e){var t="";t=e.response?e.response.url:e.url,a.fakeFileList.push({name:e.name,url:t})})),this.uploadComplete=!0},uploadError:function(e,t,n){this.$message.error("上传出错")},handleRemove:function(e,t){var n=this;this.fakeFileList=[],t.map((function(e){var t="";t=e.response?e.response.url:e.url,n.fakeFileList.push({name:e.name,url:t})}))}}}),pe=me,de=(n("4712"),Object(f["a"])(pe,ce,ue,!1,null,null,null)),fe=de.exports,he={props:{id:{}},components:{UpLoadimgs:fe},data:function(){return{wearGtypeR:"",wearGtypeL:"",wearGtypes:[{label:"未佩戴",value:"未佩戴"},{label:"框架眼镜",value:"框架眼镜"},{label:"隐形眼镜",value:"隐形眼镜"},{label:"夜戴角膜塑性镜",value:"夜戴角膜塑性镜"},{label:"未知",value:"未知"}],eyePositionR:"",eyePositionL:"",eyePositions:[{label:"正常",value:"正常"},{label:"内斜视",value:"内斜视"},{label:"外斜视",value:"外斜视"},{label:"上下斜视",value:"上下斜视"}],threedEyeR:"",threedEyeL:"",threedEyes:[{label:"无",value:"无"},{label:"有",value:"有"}],colorFeelR:"",colorFeelL:"",colorFeels:[{label:"正常",value:"正常"},{label:"异常",value:"异常"}],eyeCheckR:"",eyeCheckL:"",eyeChecks:[{label:"正常",value:"正常"},{label:"内翻",value:"内翻"},{label:"倒睫",value:"倒睫"}],categories:[{label:"男",value:"男"},{label:"女",value:"女"}],historyData:[{project_name:"裸眼视力",r_eye:"",l_eye:""},{project_name:"是否戴镜",r_eye:"",l_eye:""},{project_name:"戴镜视力",r_eye:"",l_eye:""},{project_name:"矫正视力",r_eye:"",l_eye:""},{project_name:"眼压",r_eye:"",l_eye:""},{project_name:"眼位",r_eye:"",l_eye:""},{project_name:"立体视",r_eye:"",l_eye:""},{project_name:"色觉",r_eye:"",l_eye:""},{project_name:"眼睑",r_eye:"",l_eye:""}],items:[],model:{name:"",avatar:"",skills:[]},createDate:"",pickerOptions1:{disabledDate:function(e){return e.getTime()>Date.now()},shortcuts:[{text:"今天",onClick:function(e){e.$emit("pick",new Date)}},{text:"昨天",onClick:function(e){var t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}},{text:"一周前",onClick:function(e){var t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",t)}}]}}},watch:{"model.birthday":function(e){console.log(e),this.model.age=oe(e)}},methods:{save:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=Object.assign({},this.model),!this.id){e.next=8;break}return t.skills.forEach((function(e){e.fakeIconLists&&(e.iconLists=e.fakeIconLists)})),e.next=5,this.$http.put("rest/customers/".concat(this.id),t);case 5:e.sent,e.next=11;break;case 8:return e.next=10,this.$http.post("rest/customers",t);case 10:e.sent;case 11:this.$router.push("/customers/list"),this.$message({type:"success",message:"保存成功"});case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetch:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("rest/customers/".concat(this.id));case 2:t=e.sent,this.model=Object.assign({},this.model,t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),afterUpload:function(e){this.$set(this.model,"avatar",e.url)},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,n=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),n||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&n},fetchItems:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("rest/items");case 2:t=e.sent,this.items=t.data;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},created:function(){window.vue=this,this.fetchItems(),this.id&&this.fetch()}},be=he,ve=(n("017e"),Object(f["a"])(be,ie,le,!1,null,null,null)),ge=ve.exports,ye=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",{attrs:{"label-position":"right",inline:""}},[n("el-row",[n("el-form-item",{attrs:{label:"姓名"}},[n("el-input",{model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1),n("el-form-item",{attrs:{label:"手机号码"}},[n("el-input",{model:{value:e.model.phone,callback:function(t){e.$set(e.model,"phone",t)},expression:"model.phone"}})],1),n("el-button",{staticClass:"goodsbtnbox",attrs:{size:"medium",type:"primary"},on:{click:e.query}},[e._v("查询")]),n("el-button",{staticClass:"goodsbtnbox",attrs:{size:"medium"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),n("el-table",{attrs:{border:"",stripe:"",data:e.items}},[n("el-table-column",{attrs:{prop:"name",label:"客户名称","min-width":"50"}}),n("el-table-column",{attrs:{prop:"phone",label:"手机号码","min-width":"60"}}),n("el-table-column",{attrs:{prop:"sex",label:"性别","min-width":"30"}}),n("el-table-column",{attrs:{prop:"age",label:"年龄","min-width":"50"}}),n("el-table-column",{attrs:{prop:"name","min-width":"50",label:"头像"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("img",{staticStyle:{height:"4rem"},attrs:{src:e.row.avatar,alt:""}})]}}])}),n("el-table-column",{attrs:{prop:"address",label:"地址","min-width":"100","show-overflow-tooltip":""}}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.$router.push("/customers/edit/"+t.row._id)}}},[e._v("编辑")]),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.remove(t.row)}}},[e._v("删除")])]}}])})],1),n("el-row",[n("My-Pagination",{ref:"paginations",staticStyle:{float:"right"},attrs:{querList:e.fetch,total:e.datatotal}})],1)],1)},xe=[],_e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[5,10,30,50,100],"page-size":e.pagesize,layout:"total,  prev, pager, next, sizes",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})},ke=[],we={name:"pagination",props:{value:{type:[String,Number],default:""},total:{type:[String,Number],default:60},querList:{type:Function}},data:function(){return{currentPage:1,pagesize:10}},methods:{handleSizeChange:function(e){this.currentPage=1,this.pagesize=e,console.log("每页 ".concat(e," 条")),this.querList()},handleCurrentChange:function(e){this.currentPage=e,this.querList(),console.log("当前页: ".concat(e))}}},$e=we,Oe=Object(f["a"])($e,_e,ke,!1,null,null,null),je=Oe.exports,Re={components:{MyPagination:je},data:function(){return{model:{name:"",phone:""},datatotal:0,items:[]}},methods:{query:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.fetch();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),resetQuery:function(){this.model={name:"",phone:""},this.fetch()},fetch:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.post("findCustomers",{name:this.model.name,phone:this.model.phone,pageIndex:this.$refs.paginations.currentPage,pageSize:this.$refs.paginations.pagesize});case 2:t=e.sent,this.items=t.data.items,this.datatotal=t.data.count;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),remove:function(e){var t=this;this.$confirm('是否确定要删除客户"'.concat(e.name,'"'),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(y["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$http.delete("rest/customers/".concat(e._id));case 2:n.sent,t.$message({type:"success",message:"删除成功!"}),t.fetch();case 5:case"end":return n.stop()}}),n)}))))}},mounted:function(){this.fetch()}},Le=Re,Se=Object(f["a"])(Le,ye,xe,!1,null,null,null),Pe=Se.exports,De=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"about"},[n("h1",[e._v(e._s(e.id?"编辑":"新建")+"管理员")]),n("el-form",{attrs:{"label-width":"120px"},nativeOn:{submit:function(t){return t.preventDefault(),e.save(t)}}},[n("el-form-item",{attrs:{label:"账号"}},[n("el-input",{model:{value:e.model.username,callback:function(t){e.$set(e.model,"username",t)},expression:"model.username"}})],1),n("el-form-item",{attrs:{label:"密码"}},[n("el-input",{model:{value:e.model.password,callback:function(t){e.$set(e.model,"password",t)},expression:"model.password"}})],1),n("el-form-item",{attrs:{label:"地址"}},[n("el-input",{model:{value:e.model.address,callback:function(t){e.$set(e.model,"address",t)},expression:"model.address"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary","native-type":"submit"}},[e._v("保存")])],1)],1)],1)},ze=[],Ce={props:{id:{}},data:function(){return{model:{}}},methods:{save:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.id){e.next=6;break}return e.next=3,this.$http.put("rest/admin_users/".concat(this.id),this.model);case 3:e.sent,e.next=9;break;case 6:return e.next=8,this.$http.post("rest/admin_users",this.model);case 8:e.sent;case 9:this.$router.push("/admin_users/list"),this.$message({type:"success",message:"保存成功"});case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetch:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("rest/admin_users/".concat(this.id));case 2:t=e.sent,this.model=t.data;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},created:function(){this.id&&this.fetch()}},Ee=Ce,Ue=Object(f["a"])(Ee,De,ze,!1,null,null,null),qe=Ue.exports,Fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v("管理员列表")]),n("el-table",{attrs:{data:e.items}},[n("el-table-column",{attrs:{prop:"_id",label:"ID",width:"240"}}),n("el-table-column",{attrs:{prop:"username",label:"用户名"}}),n("el-table-column",{attrs:{prop:"address",label:"地址"}}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.$router.push("/admin_users/edit/"+t.row._id)}}},[e._v("编辑")]),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.remove(t.row)}}},[e._v("删除")])]}}])})],1)],1)},Ie=[],Ne={data:function(){return{items:[]}},methods:{fetch:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("rest/admin_users");case 2:t=e.sent,this.items=t.data;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),remove:function(e){var t=this;this.$confirm('是否确定要删除管理员 "'.concat(e.username,'"'),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(y["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$http.delete("rest/admin_users/".concat(e._id));case 2:n.sent,t.$message({type:"success",message:"删除成功!"}),t.fetch();case 5:case"end":return n.stop()}}),n)}))))}},created:function(){this.fetch()}},Te=Ne,Be=Object(f["a"])(Te,Fe,Ie,!1,null,null,null),Ae=Be.exports;a["default"].use(r["a"]);var Ge=[{path:"/login",name:"login",component:w,meta:{isPublic:!0}},{path:"/upload",name:"upload",component:fe,meta:{isPublic:!0}},{path:"/",name:"home",component:b,children:[{path:"/categories/create",component:S},{path:"/categories/edit/:id",component:S,props:!0},{path:"/categories/list",component:U},{path:"/items/create",component:B},{path:"/items/edit/:id",component:B,props:!0},{path:"/items/list",component:Z},{path:"/heroes/create",component:X},{path:"/heroes/edit/:id",component:X,props:!0},{path:"/heroes/list",component:se},{path:"/customers/create",component:ge},{path:"/customers/edit/:id",component:ge,props:!0},{path:"/customers/list",component:Pe},{path:"/admin_users/create",component:qe},{path:"/admin_users/edit/:id",component:qe,props:!0},{path:"/admin_users/list",component:Ae}]}],Me=new r["a"]({routes:Ge});Me.beforeEach((function(e,t,n){return e.meta.isPublic||localStorage.token?!e.meta.isPublic&&e.path.indexOf("customers")<0&&"superadmin"!=s["a"].getters.logininfo._doc.username?n("/login"):void n():n("/login")}));t["a"]=Me},b4fe:function(e,t,n){"use strict";var a=n("ba74"),r=n.n(a);r.a},b72d:function(e,t,n){"use strict";var a=n("2b84"),r=n.n(a);r.a},b9b5:function(e,t,n){},ba6a:function(e,t,n){"use strict";n("d3b7");var a=n("bc3a"),r=n.n(a),s=n("2b0e"),i=n("a18c"),l=r.a.create({baseURL:Object({NODE_ENV:"production",BASE_URL:"/admin/"}).VUE_APP_API_URL||"/admin/api"});l.interceptors.request.use((function(e){return localStorage.token&&(e.headers.Authorization="Bearer "+localStorage.token),e}),(function(e){return Promise.reject(e)})),l.interceptors.response.use((function(e){return e}),(function(e){return e.response.data.message&&(s["default"].prototype.$message({type:"error",message:e.response.data.message}),401===e.response.status&&i["a"].push("/login")),Promise.reject(e)})),t["a"]=l},ba74:function(e,t,n){},c653:function(e,t,n){var a={"./user.js":"0f9a"};function r(e){var t=s(e);return n(t)}function s(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=s,e.exports=r,r.id="c653"},d6db:function(e,t,n){"use strict";var a=n("e67a"),r=n.n(a);r.a},d8ad:function(e,t,n){},e2fc:function(e,t,n){},e67a:function(e,t,n){}});
//# sourceMappingURL=app.05975f0d.js.map